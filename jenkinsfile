  node('master'){
  stage('SCM Checkout') {
  git 'https://github.com/anup03gupta/FinalCalci.git'

}
   stage('Build') {
   def mvn_version = 'MAVEN'
    withEnv( ["PATH+MAVEN=${tool mvn_version}/bin"] ) {
    sh 'mvn install -Dmaven.test.skip=true'
     dir('/var/lib/jenkins/workspace/DEMO/target/'){
    stash name: "war", includes: "Calculator_dev.war"
}
} 
}
}
node('jenkins-slave') {
 stage('Deploy'){
 input message: 'Proceed or Abort', submitter: 'Anup'
       unstash "war"
       cp /opt/slave-workspace/workspace/DEMO/Calculator_dev.war /opt/tomcat/apache-tomcat-8.5.54/webapps/DEV_CALCULATOR.war
}
}
